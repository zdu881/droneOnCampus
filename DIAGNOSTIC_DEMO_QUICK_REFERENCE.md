# diagnostic-demo.html 快速参考卡

## 🎯 核心功能（一句话总结）

一个功能完整的诊断模块演示系统，支持三色 LED 状态转换、四种错误模拟、实时日志记录和统计分析。

---

## 🚀 三步快速开始

### 步骤 1: 打开页面
```
在浏览器中打开: /data/home/sim6g/rayCode/droneOnCampus/diagnostic-demo.html
```

### 步骤 2: 选择演示场景
```
点击"测试场景"卡片中的任一按钮：
  ✓ 正常完成      → 完整的成功流程演示
  ✗ 本地处理错误  → 本地推理失败演示
  ✗ 云服务拒绝    → 云端处理失败演示
  ✗ 网络错误      → 网络连接失败演示
```

### 步骤 3: 观察结果
```
看板显示:
  ✓ LED 指示灯实时转换 (绿/黄/红)
  ✓ 进度条实时更新
  ✓ 日志实时记录
  ✓ 统计信息自动累计
```

---

## 📊 五分钟速查表

### 颜色映射 (五秒记住)

```
🟢 Green (绿)  = 1  →  正常/就绪/完成
🟡 Yellow(黄)  = 2  →  处理中(本地或云)
🔴 Red (红)    = 0  →  错误/失败
```

### 状态流程 (四种场景)

#### ✓ 正常完成
```
🟢 initializing → 🟡 local_processing → 🟡 cloud_processing → 🟢 completed
(初始化)          (本地推理)            (云端处理)              (完成)
```

#### ✗ 本地处理错误
```
🟢 initializing → 🟡 local_processing → 🔴 error
(初始化)          (本地推理)            (错误)
```

#### ✗ 云服务拒绝
```
🟢 initializing → 🟡 local_processing → 🟡 cloud_processing → 🔴 error
(初始化)          (本地推理)            (云端处理)              (错误)
```

#### ✗ 网络错误
```
🟢 initializing → 🟡 local_processing → 🟡 cloud_processing → 🔴 error
(初始化)          (本地推理)            (云端准备)              (错误)
```

### 按钮功能速查

| 按钮 | 快捷说明 |
|------|---------|
| ✓ 正常完成 | 演示成功流程 (~10秒) |
| ✗ 本地错误 | 演示本地失败 (~5秒) |
| ✗ 云服务拒绝 | 演示云失败 (~10秒) |
| ✗ 网络错误 | 演示网络失败 (~8秒) |
| 🔄 重置 | 回到待命状态 |
| 🗑️ 清除 | 清空日志 |

### 高级选项速查

| 选项 | 默认 | 作用 |
|------|------|------|
| 启用云处理 | ✓ | 演示中包含云端处理阶段 |
| 随机错误注入 | ✓ | 随机触发错误 |
| 详细日志 | ✗ | 输出到浏览器控制台 |
| API 集成 | ✗ | 调用实际的 apiManager |

### 快速操作速查

| 操作 | 说明 |
|------|------|
| 导出日志 | 下载 TXT 格式的完整日志 |
| 显示详情 | 切换详情面板可见性 |
| 测试颜色 | 依次测试所有5种颜色 |
| 自动测试 | 一键执行所有4个场景 |

---

## 🔥 常用操作速查

### 需要导出日志？
```
点击"导出日志" → 自动下载 diagnostic-log-[时间].txt
```

### 需要完整演示？
```
点击"自动测试" → 自动执行4个场景 → 等待完成 → 查看统计结果
```

### 需要测试颜色？
```
点击"测试颜色映射" → 观察5种颜色依次转换 → 对比 UE 灯光
```

### 需要详细信息？
```
点击"显示详情" → 查看系统状态、API 连接、最后操作
```

### 需要清除重来？
```
点击"重置指示灯" + "清除日志" → 系统恢复初始状态
```

---

## 📈 统计面板速查

页面会自动显示四个统计指标：

```
┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐
│   总处理次数  │  │   成功完成    │  │   错误数量    │  │   平均耗时    │
│      4       │  │      1       │  │      3       │  │   8235ms    │
└─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘
```

**自动更新条件：**
- 每个演示场景结束后自动更新
- 所有统计基于实际演示执行时间
- "清除日志"不会重置统计（只清除显示）

---

## 🎨 颜色对照速查

### 十六进制值
```
#10b981 = 绿色   (RGB: 16, 185, 129)
#f59e0b = 黄色   (RGB: 245, 158, 11)
#ef4444 = 红色   (RGB: 239, 68, 68)
```

### UE 引擎代码
```
1 = 绿色
2 = 黄色
0 = 红色
```

### CSS 类名
```
.indicator-light.green   → #10b981
.indicator-light.yellow  → #f59e0b
.indicator-light.red     → #ef4444
```

---

## ⌨️ 键盘/控制台技巧

### 在浏览器控制台中测试

```javascript
// 打开控制台: F12 → Console 标签

// 测试统计功能
console.log(DEMO_STATE.stats);

// 查看 API 连接状态
console.log(window.apiManager);

// 手动调用演示
demoSuccessFlow();

// 查看当前选项设置
console.log({
  cloudProcess: document.getElementById('cloud-process-enabled').checked,
  verboseLogging: document.getElementById('verbose-logging').checked,
  apiIntegration: document.getElementById('api-integration').checked
});
```

---

## 🐛 常见问题速查

### Q: 灯光颜色不对？
```
A: 1. 清除浏览器缓存 (Ctrl+Shift+Delete)
   2. 硬刷新页面 (Ctrl+Shift+R)
   3. 检查 CSS 变量是否正确加载
```

### Q: API 集成不工作？
```
A: 1. 确认 window.apiManager 已加载
   2. 在控制台检查: console.log(window.apiManager)
   3. 确保 dashboard-manager.js 已加载
```

### Q: 日志太多了怎么办？
```
A: 1. 点击"清除日志"清空显示
   2. 点击"导出日志"保存完整记录
   3. 日志容器可以滚动查看
```

### Q: 想查看详细日志？
```
A: 1. 勾选"详细日志输出"选项
   2. 打开浏览器控制台 (F12)
   3. 每条日志都会输出到控制台
```

### Q: 如何重新开始？
```
A: 1. 点击"重置指示灯"回到待命状态
   2. 点击"清除日志"删除日志显示
   3. 统计信息会保留，手动调整需要点击"自动测试"后重新计算
```

---

## 📋 演示流程检查清单

### 演示前检查
- [ ] 页面加载完成（显示"演示系统启动完成"日志）
- [ ] 三个基站指示灯显示绿色
- [ ] 统计面板可见（总处理次数应该是0）
- [ ] 高级选项可以勾选

### 演示中检查
- [ ] 指示灯颜色正确转换
- [ ] 日志实时显示处理步骤
- [ ] 进度条平滑更新
- [ ] 状态历史记录完整

### 演示后检查
- [ ] 统计数据正确更新
- [ ] 日志记录完整
- [ ] 可以导出日志
- [ ] 可以重置后再次演示

---

## 💾 文件关联

| 文件 | 关联方式 | 依赖关系 |
|------|--------|--------|
| dashboard-manager.js | 可选 (API 集成) | 如果启用 API 集成模式 |
| ue-light-manager.js | 可选 (API 集成) | 通过 apiManager 调用 |
| COLOR_MAPPING_CHECK.md | 参考 | 颜色映射验证文档 |
| DIAGNOSTIC_DEMO_GUIDE.md | 详细文档 | 完整使用说明 |

---

## ⭐ 核心特性总结

- **✅ 完整演示** - 5种状态 + 4种错误 + 颜色映射
- **✅ 实时反馈** - LED灯光、进度条、日志、统计
- **✅ 易操作** - 按钮式操作，无需编码
- **✅ 可扩展** - 支持 API 集成和自定义
- **✅ 数据导出** - 完整日志下载
- **✅ 自动化** - 一键自动测试所有场景
- **✅ 参考信息** - 颜色映射表直观展示
- **✅ 响应式设计** - 支持桌面和移动设备

---

## 📞 快速支持

遇到问题？
1. 查看"故障排除"章节
2. 打开浏览器控制台 (F12) 查看错误
3. 检查 COLOR_MAPPING_CHECK.md 验证颜色映射
4. 参考 DIAGNOSTIC_LED_ENHANCEMENT.md 了解技术细节

---

**版本：** 1.2  
**最后更新：** 2025年1月  
**状态：** ✅ 完全完善  

