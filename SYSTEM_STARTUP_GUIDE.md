# æ ¡å›­æ— äººæœºç³»ç»Ÿå¯åŠ¨æŒ‡å—

## ğŸ¯ å…³é”®å‘ç°

**Remote Control API éœ€è¦çš„å‚æ•°**:
- âœ… `-RCWebInterface` - å¯ç”¨ Web API
- âœ… `-HTTPPort=30010` - è®¾ç½® HTTP ç›‘å¬ç«¯å£

---

## âš¡ å¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èï¼‰

### ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
bash ~/rayCode/droneOnCampus/scripts/start_complete_system.sh
```

è¿™ä¸ªè„šæœ¬ä¼šæŒ‰æ­£ç¡®é¡ºåºå¯åŠ¨ï¼š
1. âœ… åƒç´ æµæœåŠ¡ (Cirrus) - ç«¯å£ 8888
2. âœ… Web ä»ªè¡¨æ¿ - ç«¯å£ 8001  
3. âœ… UE åº”ç”¨ - Remote Control API ç«¯å£ 30010

---

## ğŸ“‹ æ‰‹åŠ¨å¯åŠ¨ï¼ˆåˆ†æ­¥ï¼‰

### æ­¥éª¤ 1ï¸âƒ£: å¯åŠ¨åƒç´ æµæœåŠ¡

```bash
cd ~/rayCode/PixelStreamingInfrastructure/SignallingWebServer/platform_scripts/bash
bash run_local.sh &
```

ç­‰å¾…çœ‹åˆ°ï¼š`Listening on port 80...` æˆ– `Streamer connected`

### æ­¥éª¤ 2ï¸âƒ£: å¯åŠ¨ Dashboard

```bash
cd ~/rayCode/droneOnCampus
python3 -m http.server 8001 &
```

éªŒè¯ï¼š`curl http://10.30.2.11:8001` åº”è¿”å› HTML

### æ­¥éª¤ 3ï¸âƒ£: å¯åŠ¨ UE åº”ç”¨ï¼ˆ**å…³é”®æ­¥éª¤**ï¼‰

```bash
cd ~/rayCode/Linux/Project/Binaries/Linux

./Project NewMap \
  -PixelStreamingURL=ws://127.0.0.1:8888 \
  -RenderOffScreen \
  -RCWebControlEnable \
  -RCWebInterfaceEnable \
  -HTTPPort=30010 \
  -ResX=1920 \
  -ResY=1080 \
  -VSync=0 \
  -FixedFrameRate=60 \
  -AudioMixer \
  -ForceRes \
  -Game \
  -server \
  -nosound \
  -PixelStreamingEncoderMinQP=20 \
  -PixelStreamingEncoderMaxQP=30 \
  -PixelStreamingWebRTCMaxBitrate=10000 \
  -PixelStreamingWebRTCMinBitrate=2000 \
  -LogCmds="LogRemoteControl Info"
```

**æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š**
```bash
bash ~/rayCode/droneOnCampus/scripts/start_ue_with_remote_control.sh
```

---

## âœ… éªŒè¯å¯åŠ¨æˆåŠŸ

### 1. æ£€æŸ¥æ‰€æœ‰ç«¯å£

```bash
netstat -tuln | grep -E '8888|8001|30010'
```

åº”æ˜¾ç¤ºï¼š
```
tcp  ... 8888   LISTEN
tcp  ... 8001   LISTEN
tcp  ... 30010  LISTEN
```

### 2. æµ‹è¯• Remote Control API

```bash
curl http://10.30.2.11:30010/remote/object/call -X OPTIONS -v
```

åº”è¿”å› HTTP 200 æˆ– 405 çŠ¶æ€ç 

### 3. åœ¨æµè§ˆå™¨ä¸­éªŒè¯

æ‰“å¼€ï¼š`http://10.30.2.11:8001/ue_api_diagnostic.html`

ç‚¹å‡» "æ£€æŸ¥è¿æ¥" æŒ‰é’®ï¼Œåº”æ˜¾ç¤º âœ… **è¿æ¥æˆåŠŸ**

---

## ğŸ§ª åŠŸèƒ½æµ‹è¯•

### æµ‹è¯•é…é€æ§åˆ¶

è®¿é—®ï¼š`http://10.30.2.11:8001/dashboard.html`

1. ç‚¹å‡»å³ä¾§å·¥å…·æ çš„ "æ— äººæœº"ï¼ˆç¡®è®¤åœ¨æ— äººæœºåœºæ™¯ï¼‰
2. åœ¨å³ä¾§é¢æ¿æ‰¾åˆ° "é…é€ä»»åŠ¡" éƒ¨åˆ†
3. ç‚¹å‡»ä»»æ„é…é€æŒ‰é’®ï¼ˆå¦‚ "æ ¡é—¨ â†’ å›¾ä¹¦é¦†"ï¼‰
4. åœ¨æµè§ˆå™¨æ§åˆ¶å° (F12) æ£€æŸ¥ API è°ƒç”¨å“åº”

### æµ‹è¯•ç¯å…‰æ§åˆ¶

åœ¨è¯Šæ–­å·¥å…·ä¸­æµ‹è¯•ï¼š`http://10.30.2.11:8001/ue_api_diagnostic.html`

1. é€‰æ‹©ç¯å…‰ï¼ˆå…¨éƒ¨ç¯å…‰ æˆ– å•ä¸ªç¯å…‰ï¼‰
2. ç‚¹å‡»é¢œè‰²æŒ‰é’®ï¼ˆç»¿è‰²/çº¢è‰²/é»„è‰²ï¼‰
3. éªŒè¯ UE ä¸­çš„ç¯å…‰æ˜¯å¦æ”¹å˜é¢œè‰²

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æ ¡å›­æ— äººæœºç³»ç»Ÿæ¶æ„                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®¢æˆ·ç«¯ (æµè§ˆå™¨)
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚                      â”‚
    â–¼                 â–¼                      â–¼
HTTP/WS          HTTP/WS                  HTTP
(8001)           (8888)                  (30010)
    â”‚                 â”‚                      â”‚
    â–¼                 â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Dashboard â”‚    â”‚ Cirrus   â”‚         â”‚UE Applicationâ”‚
â”‚Server    â”‚    â”‚SignalServer       â”‚RemoteControl â”‚
â”‚Python    â”‚    â”‚Node.js   â”‚         â”‚API           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                 â”‚                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  UE Map    â”‚
        â”‚  NewMap    â”‚
        â”‚ â€¢ Drone    â”‚
        â”‚ â€¢ Lights   â”‚
        â”‚ â€¢ Objects  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: Remote Control API è¿æ¥å¤±è´¥

**æ£€æŸ¥æ¸…å•ï¼š**
```bash
# 2. æ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„ Remote Control å‚æ•°
# åº”è¯¥åŒ…å«ï¼š-RCWebControlEnable -RCWebInterfaceEnable -HTTPPort=30010

# 3. ç«¯å£ 30010 æ˜¯å¦å¼€æ”¾
netstat -tuln | grep 30010

# 4. æ£€æŸ¥ UE æ—¥å¿—
tail -f ~/rayCode/Linux/Project/Saved/Logs/*.log | grep Remote
```

### Q: é…é€æŒ‰é’®ç‚¹å‡»æ— ååº”

**å¯èƒ½åŸå› ï¼š**
1. Remote Control API æœªå¯åŠ¨ â†’ æŒ‰ä¸Šé¢æ£€æŸ¥æ¸…å•
2. API å‡½æ•°è·¯å¾„é”™è¯¯ â†’ æ£€æŸ¥ `api-manager.js` ä¸­çš„ actor è·¯å¾„
3. ç›®æ ‡ä½ç½®æœªå®šä¹‰ â†’ æ£€æŸ¥ `locations` å¯¹è±¡ä¸­æ˜¯å¦æœ‰ç›®æ ‡åœ°ç‚¹

### Q: ç¯å…‰ä¸æ”¹å˜é¢œè‰²

**æ£€æŸ¥ï¼š**
1. ç¯å…‰å¯¹è±¡è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆåœ¨ UE ä¸­æŸ¥è¯¢ï¼‰
2. ç¯å…‰å¯¹è±¡æ˜¯å¦å®ç°äº† `ChangeColorAPI` å‡½æ•°
3. ç¯å…‰å¯¹è±¡æ˜¯å¦åœ¨ `NewMap` ä¸­å­˜åœ¨

### Q: è„šæœ¬æƒé™é”™è¯¯

```bash
# ä½¿è„šæœ¬å¯æ‰§è¡Œ
chmod +x ~/rayCode/droneOnCampus/scripts/*.sh
```

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” | ä½ç½® |
|------|------|------|
| `start_complete_system.sh` | ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ | `scripts/` |
| `start_ue_with_remote_control.sh` | ä»…å¯åŠ¨ UE åº”ç”¨ | `scripts/` |
| `api-manager.js` | Remote Control API å®ç° | `droneOnCampus/` |
| `dashboard-manager.js` | ä»ªè¡¨æ¿äº‹ä»¶å¤„ç† | `droneOnCampus/` |
| `ue_api_diagnostic.html` | API è¯Šæ–­å·¥å…· | `droneOnCampus/` |
| `UE_REMOTE_CONTROL_QUICK_START.md` | å¿«é€Ÿå‚è€ƒ | `droneOnCampus/` |

---

## ğŸš¨ æ•…éšœæ’æŸ¥æµç¨‹

å¦‚æœç³»ç»Ÿä¸å·¥ä½œï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤è¯Šæ–­ï¼š

```bash
# 1. æ£€æŸ¥æ‰€æœ‰æœåŠ¡æ˜¯å¦è¿è¡Œ
netstat -tuln | grep -E '8888|8001|30010'

# 2. å¦‚æœç«¯å£æœªæ˜¾ç¤ºï¼Œå¯åŠ¨ç›¸åº”æœåŠ¡
#    - 8888: Cirrus æœªå¯åŠ¨
#    - 8001: Dashboard æœªå¯åŠ¨
#    - 30010: UE åº”ç”¨æœªå¯åŠ¨æˆ–ç¼ºå°‘å‚æ•°

# 3. æµ‹è¯• API è¿æ¥
curl http://10.30.2.11:30010/remote/object/call -X OPTIONS

# 4. æ£€æŸ¥ UE æ—¥å¿—
tail -100 ~/rayCode/Linux/Project/Saved/Logs/*.log

# 5. ä½¿ç”¨è¯Šæ–­å·¥å…·
# http://10.30.2.11:8001/ue_api_diagnostic.html
```

---

## ğŸ“ å¯åŠ¨å‘½ä»¤æ€»ç»“

| æœåŠ¡ | å¯åŠ¨å‘½ä»¤ | ç«¯å£ | éªŒè¯å‘½ä»¤ |
|------|--------|------|--------|
| **Cirrus** | `bash run_local.sh` | 8888 | `netstat -tuln \| grep 8888` |
| **Dashboard** | `python3 -m http.server 8001` | 8001 | `curl http://10.30.2.11:8001` |
| **UE + API** | `./Project NewMap -RCWebInterface -HTTPPort=30010` | 30010 | `curl http://10.30.2.11:30010` |

---

## âœ¨ å®Œæ•´å·¥ä½œæµç¨‹

```
1. å¯åŠ¨è„šæœ¬
   â†“
2. Cirrus æœåŠ¡å¯åŠ¨ (ç«¯å£ 8888)
   â†“
3. Dashboard æœåŠ¡å¯åŠ¨ (ç«¯å£ 8001)
   â†“
4. UE åº”ç”¨å¯åŠ¨ (Remote Control API ç«¯å£ 30010)
   â†“
5. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://10.30.2.11:8001/dashboard.html
   â†“
6. ä½¿ç”¨ä»ªè¡¨æ¿æ§åˆ¶æ— äººæœºå’Œç¯å…‰
   â†“
7. é…é€ä»»åŠ¡å’Œç¯å…‰æ§åˆ¶é€šè¿‡ Remote Control API è°ƒç”¨ UE
   â†“
âœ… ç³»ç»Ÿæ­£å¸¸è¿è¡Œ
```

---

**ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2024-12-04  
**å…³é”®æ›´æ–°**: æ·»åŠ äº† `-RCWebInterface` å’Œ `-HTTPPort` å‚æ•°çš„å®Œæ•´è¯´æ˜
