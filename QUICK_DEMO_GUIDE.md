# ğŸš Campus Drone Digital Twin - å¿«é€Ÿæ¼”ç¤ºæŒ‡å—

## ğŸ“‹ æ¼”ç¤ºåœºæ™¯æ¦‚è§ˆ

æœ¬ç³»ç»Ÿé›†æˆäº†ä¸‰ä¸ªä¸»è¦åŠŸèƒ½æ¨¡å—ï¼Œå¯é€šè¿‡ web dashboard è¿›è¡Œæ¼”ç¤ºï¼š

### 1ï¸âƒ£ **æ— äººæœºé£è¡Œæ¼”ç¤º** (è‡ªåŠ¨é©¾é©¶åœºæ™¯)
- é€‰æ‹©èµ·ç‚¹å’Œç»ˆç‚¹
- ç‚¹å‡»"æ‰§è¡Œé£è¡Œ"æŒ‰é’®
- æ— äººæœºè‡ªåŠ¨ä»èµ·ç‚¹é£å¾€ç»ˆç‚¹

### 2ï¸âƒ£ **åŸºç«™ç¯å…‰æ§åˆ¶æ¼”ç¤º** (è‡ªåŠ¨é©¾é©¶åœºæ™¯)
- 3ä¸ªé¢„è®¾åŸºç«™çš„å®æ—¶ç¯å…‰æ§åˆ¶
- æ ¹æ®åŸºç«™çŠ¶æ€è‡ªåŠ¨æ”¹å˜ç¯å…‰é¢œè‰²ï¼ˆçº¢/ç»¿/é»„ï¼‰
- ä¸ CM-ZSB æ£€æµ‹ç³»ç»Ÿé›†æˆ

### 3ï¸âƒ£ **åƒç´ æµé€æ¼”ç¤º** (è‡ªåŠ¨é©¾é©¶åœºæ™¯)
- å®æ—¶è§†é¢‘æµé€è‡ª UE åº”ç”¨
- åœ¨ web æµè§ˆå™¨ä¸­æ˜¾ç¤ºæ¸¸æˆç”»é¢
- æ”¯æŒè¿œç¨‹äº¤äº’æ§åˆ¶

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨æ­¥éª¤

### æ­¥éª¤ 1: å¯åŠ¨ UE åº”ç”¨

```bash
# è¿›å…¥ UE5.3 é¡¹ç›®ç›®å½•
cd /data/home/sim6g/rayCode/Linux/Project/Binaries/Linux

# è¿è¡Œåº”ç”¨ï¼ˆéœ€è¦å¯ç”¨åƒç´ æµé€ï¼‰
./Project -PixelStreamingURL=ws://127.0.0.1:8888 -RenderOffScreen
```

**è¯´æ˜**ï¼š
- `-PixelStreamingURL=ws://127.0.0.1:8888` è¿æ¥åˆ°ä¿¡ä»¤æœåŠ¡å™¨
- `-RenderOffScreen` åœ¨åå°æ— å¤´æ¨¡å¼è¿è¡Œï¼ˆé˜²æ­¢çª—å£è¢«æœ€å°åŒ–ï¼‰

---

### æ­¥éª¤ 2: å¯åŠ¨åƒç´ æµé€åŸºç¡€è®¾æ–½

åœ¨æ–°çš„ç»ˆç«¯ä¸­è¿è¡Œï¼š

```bash
# å¯åŠ¨ä¿¡ä»¤æœåŠ¡å™¨å’Œ Web æœåŠ¡å™¨
cd ~/PixelStreamingInfrastructure/SignallingWebServer/platform_scripts/bash

# æ‰§è¡Œå¯åŠ¨è„šæœ¬ï¼ˆLinuxï¼‰
./start_with_stun.sh

# é¢„æœŸè¾“å‡ºï¼š
# WebSocket listening to Streamer connections on :8888
# WebSocket listening to Players connections on :80
# Http listening on *: 80
```

**å…³é”®ç«¯å£**ï¼š
- `:8888` - Streamer WebSocketï¼ˆUE åº”ç”¨è¿æ¥ï¼‰
- `:80` - Players WebSocket/HTTPï¼ˆæµè§ˆå™¨è¿æ¥ï¼‰

---

### æ­¥éª¤ 3: å¯åŠ¨ Dashboard åº”ç”¨

```bash
cd /data/home/sim6g/rayCode/droneOnCampus

# å¯åŠ¨æœ¬åœ° HTTP æœåŠ¡å™¨ï¼ˆPython 3ï¼‰
python3 -m http.server 8000

# æˆ–ä½¿ç”¨ Node.js
npx http-server -p 8000 --cors
```

è®¿é—®åœ°å€ï¼š`http://10.30.2.11:8000`

---

## ğŸ“º æ¼”ç¤ºæµç¨‹

### æ¼”ç¤º 1: æ— äººæœºé£è¡Œæ§åˆ¶

1. **è®¿é—® Dashboard**
   - æ‰“å¼€ `http://10.30.2.11:8000`
   - ç‚¹å‡»"è‡ªåŠ¨é©¾é©¶"åœºæ™¯åˆ‡æ¢æŒ‰é’®

2. **æ— äººæœºé£è¡Œæ¼”ç¤º**
   ```
   èµ·ç‚¹é€‰æ‹©ï¼šä»“åº“ (0, 0, 100)
   ç»ˆç‚¹é€‰æ‹©ï¼šå›¾ä¹¦é¦† (-850, -30, 62)
   ç‚¹å‡»ï¼šæ‰§è¡Œé£è¡Œ
   ```
   
3. **é¢„æœŸç»“æœ**
   - æ— äººæœºä»ä»“åº“ä½ç½®é£å¾€å›¾ä¹¦é¦†
   - Dashboard æ˜¾ç¤ºé£è¡ŒçŠ¶æ€æ›´æ–°
   - æ§åˆ¶å°è¾“å‡ºé£è¡Œæ—¥å¿—

---

### æ¼”ç¤º 2: åŸºç«™ç¯å…‰æ§åˆ¶

1. **è‡ªåŠ¨é©¾é©¶åœºæ™¯**ä¸­å·²æ˜¾ç¤ºä¸‰ä¸ªåŸºç«™ç¯å…‰å¡ç‰‡

2. **æ‰‹åŠ¨æ§åˆ¶ç¯å…‰**
   ```
   ç‚¹å‡»ç¯å…‰æŒ‰é’®æ”¹å˜é¢œè‰²ï¼š
   - çº¢è‰²ï¼šæ£€æµ‹ä¸­/é”™è¯¯çŠ¶æ€
   - ç»¿è‰²ï¼šæ­£å¸¸/ç©ºé—²çŠ¶æ€
   - é»„è‰²ï¼šå¤„ç†ä¸­çŠ¶æ€
   ```

3. **ä¸ CM-ZSB é›†æˆ**
   - ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹åŸºç«™çŠ¶æ€
   - æ ¹æ®æ£€æµ‹ç»“æœè‡ªåŠ¨æ”¹å˜ç¯å…‰
   - ç¯å…‰é¢œè‰²å®æ—¶ååº”åŸºç«™çŠ¶æ€

---

### æ¼”ç¤º 3: åƒç´ æµé€é›†æˆ

1. **è§†é¢‘æµæ˜¾ç¤º**
   - è‡ªåŠ¨é©¾é©¶åœºæ™¯ä¸­æ˜¾ç¤º UE åº”ç”¨çš„å®æ—¶ç”»é¢
   - iframe åµŒå…¥ä» `http://10.30.2.11:80` åŠ è½½

2. **WebRTC è¿æ¥éªŒè¯**
   ```
   æµè§ˆå™¨æ§åˆ¶å°æ£€æŸ¥ï¼š
   - WebSocket è¿æ¥çŠ¶æ€
   - è§†é¢‘æµè´¨é‡
   - ç½‘ç»œå»¶è¿Ÿ
   ```

3. **äº¤äº’æ¼”ç¤º**
   - é€šè¿‡æµè§ˆå™¨è¾“å…¥æ§åˆ¶ UE åº”ç”¨
   - é”®ç›˜/é¼ æ ‡äº‹ä»¶è½¬å‘åˆ° UE
   - æŸ¥çœ‹å®æ—¶å“åº”

---

## ğŸ”§ ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Web Dashboard (8000)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Dashboard Manager                           â”‚   â”‚
â”‚  â”‚  â”œâ”€ Simplified Flight Manager                â”‚   â”‚
â”‚  â”‚  â”œâ”€ UE Light Manager                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ CM-ZSB Detection Mapper                  â”‚   â”‚
â”‚  â”‚  â””â”€ Pixel Streaming Viewer                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†•
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Pixel Streaming              â”‚
         â”‚   Infrastructure (Port 80, 8888)
         â”‚   â”œâ”€ SignallingWebServer       â”‚
         â”‚   â”œâ”€ Web Server (HTML/JS)      â”‚
         â”‚   â””â”€ STUN/TURN Config          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†•
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   UE5.3 Application            â”‚
         â”‚   (Port 30010)                 â”‚
         â”‚   â”œâ”€ Remote Control API        â”‚
         â”‚   â”‚  â”œâ”€ SetLocation (Drone)    â”‚
         â”‚   â”‚  â”œâ”€ Fly (Drone)            â”‚
         â”‚   â”‚  â””â”€ ChangeColorAPI (Light) â”‚
         â”‚   â”œâ”€ Pixel Streaming Plugin    â”‚
         â”‚   â””â”€ NewMap (Level)            â”‚
         â”‚      â”œâ”€ light_C_* (ç¯å…‰å¯¹è±¡)   â”‚
         â”‚      â”œâ”€ Drone (æ— äººæœº)         â”‚
         â”‚      â””â”€ NewMap_C_3 (å…³å¡è“å›¾)  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†•
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   CM-ZSB (åŸºç«™æ£€æµ‹ç³»ç»Ÿ)        â”‚
         â”‚   (å¯é€‰ä¾èµ–)                   â”‚
         â”‚   â”œâ”€ Node 1 Detection          â”‚
         â”‚   â”œâ”€ Node 2 Detection          â”‚
         â”‚   â””â”€ Node 3 Detection          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š API æ¥å£éªŒè¯

### 1. Remote Control APIï¼ˆPUT æ–¹æ³•ï¼‰

**åœ°å€**: `http://10.30.2.11:30010/remote/object/call`

**æµ‹è¯•é£è¡Œ**ï¼š
```bash
curl -X PUT http://10.30.2.11:30010/remote/object/call \
  -H "Content-Type: application/json" \
  -d '{
    "objectPath": "/Game/UEDPIE_0_NewMap.NewMap:PersistentLevel.NewMap_C_3",
    "functionName": "SetLocation",
    "parameters": {"X": 100, "Y": 200, "Z": 150}
  }'
```

**æµ‹è¯•ç¯å…‰**ï¼š
```bash
curl -X PUT http://10.30.2.11:30010/remote/object/call \
  -H "Content-Type: application/json" \
  -d '{
    "objectPath": "/Game/UEDPIE_0_NewMap.NewMap:PersistentLevel.light_C_UAID_A0AD9F0755B9CFA302_2066102057",
    "functionName": "ChangeColorAPI",
    "parameters": {"Active": 1}
  }'
```

**å‚æ•°è¯´æ˜**ï¼š
- `Active: 0` - çº¢è‰²ï¼ˆé”™è¯¯/æ£€æµ‹ä¸­ï¼‰
- `Active: 1` - ç»¿è‰²ï¼ˆæ­£å¸¸ï¼‰
- `Active: 2` - é»„è‰²ï¼ˆå¤„ç†ä¸­ï¼‰

### 2. åƒç´ æµé€éªŒè¯

åœ¨æµè§ˆå™¨è®¿é—®ï¼š`http://10.30.2.11:80`

é¢„æœŸæ˜¾ç¤ºï¼š
- Epic Games é»˜è®¤åƒç´ æµé€æ’­æ”¾å™¨ç•Œé¢
- UE åº”ç”¨çš„å®æ—¶è§†é¢‘æµ
- äº¤äº’æ§åˆ¶æŒ‰é’®

---

## âš ï¸ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: UE åº”ç”¨æ— æ³•è¿æ¥ä¿¡ä»¤æœåŠ¡å™¨

**ç—‡çŠ¶**ï¼š
```
[LogPixelStreaming] Warning: Failed to connect to Signalling Server
```

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥ä¿¡ä»¤æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
netstat -tuln | grep 8888

# ç¡®ä¿é˜²ç«å¢™å¼€æ”¾ 8888 ç«¯å£
sudo ufw allow 8888

# æ£€æŸ¥ UE åº”ç”¨çš„ PixelStreamingURL å‚æ•°
# åº”è¯¥æ˜¯ ws://127.0.0.1:8888ï¼ˆæœ¬æœºï¼‰ æˆ– ws://10.30.2.11:8888ï¼ˆç½‘ç»œï¼‰
```

### é—®é¢˜ 2: ç¯å…‰æ§åˆ¶æ²¡æœ‰å“åº”

**ç—‡çŠ¶**ï¼šç¯å…‰é¢œè‰²æœªæ”¹å˜

**æ’æŸ¥**ï¼š
```bash
# æ£€æŸ¥ UE åº”ç”¨æ˜¯å¦è¿è¡Œ
ps aux | grep Project

# éªŒè¯å¯¹è±¡è·¯å¾„æ˜¯å¦æ­£ç¡®
# ç¯å…‰å¯¹è±¡è·¯å¾„å¿…é¡»å®Œå…¨åŒ¹é… UE ä¸­çš„å¯¹è±¡åç§°
```

### é—®é¢˜ 3: åƒç´ æµé€è§†é¢‘ä¸æ˜¾ç¤º

**ç—‡çŠ¶**ï¼šiframe ç©ºç™½

**æ’æŸ¥**ï¼š
```bash
# æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
# æŸ¥çœ‹ç½‘ç»œè¿æ¥ï¼ˆDevTools â†’ Networkï¼‰

# éªŒè¯ç«¯å£è®¿é—®
curl http://10.30.2.11:80

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw allow 80
```

---

## ğŸ“ æ¼”ç¤ºè„šæœ¬ç¤ºä¾‹

### å®Œæ•´æ¼”ç¤ºè„šæœ¬

```javascript
// 1. åˆå§‹åŒ–ç®¡ç†å™¨
const apiManager = new UnrealEngineAPIManager();
const flightManager = new SimplifiedDroneFlightManager(apiManager);
const lightManager = new UnrealEngineLightManager(apiManager);

// 2. é£è¡Œæ¼”ç¤º
async function demonstrateFlight() {
  console.log("ğŸš å¼€å§‹é£è¡Œæ¼”ç¤º...");
  
  const result = await flightManager.flyBetweenPresets('warehouse', 'library');
  
  if (result.success) {
    console.log("âœ“ é£è¡Œå®Œæˆï¼");
  } else {
    console.log("âœ— é£è¡Œå¤±è´¥:", result.error);
  }
}

// 3. ç¯å…‰æ¼”ç¤º
async function demonstrateLights() {
  console.log("ğŸ’¡ å¼€å§‹ç¯å…‰æ¼”ç¤º...");
  
  // æ”¹å˜ç¯å…‰ 1 ä¸ºç»¿è‰²
  await lightManager.changeBaseStationLight(1, 1);
  
  // æ”¹å˜ç¯å…‰ 2 ä¸ºçº¢è‰²
  await lightManager.changeBaseStationLight(2, 0);
  
  // æ”¹å˜ç¯å…‰ 3 ä¸ºé»„è‰²
  await lightManager.changeBaseStationLight(3, 2);
  
  console.log("âœ“ ç¯å…‰æ›´æ–°å®Œæˆï¼");
}

// 4. æ‰§è¡Œæ¼”ç¤º
(async () => {
  await demonstrateFlight();
  await demonstrateLights();
})();
```

---

## ğŸ“Œ å…³é”®æŠ€æœ¯æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| UE åº”ç”¨åœ°å€ | http://10.30.2.11:30010 |
| Remote Control API ç«¯å£ | 30010 |
| åƒç´ æµé€ç«¯å£ï¼ˆStreamerï¼‰ | 8888 |
| åƒç´ æµé€ç«¯å£ï¼ˆPlayersï¼‰ | 80 |
| Dashboard ç«¯å£ | 8000 |
| é£è¡Œå»¶è¿Ÿ | < 1ç§’ |
| ç¯å…‰æ§åˆ¶å»¶è¿Ÿ | < 500ms |
| è§†é¢‘æµå»¶è¿Ÿ | < 200ms |

---

## âœ… æ¼”ç¤ºæ£€æŸ¥æ¸…å•

- [ ] UE åº”ç”¨å·²å¯åŠ¨å¹¶è¿è¡Œ
- [ ] åƒç´ æµé€åŸºç¡€è®¾æ–½å·²å¯åŠ¨
- [ ] Dashboard åº”ç”¨å·²å¯åŠ¨
- [ ] Remote Control API å¯è®¿é—®ï¼ˆPort 30010ï¼‰
- [ ] åƒç´ æµé€ä¿¡ä»¤æœåŠ¡å™¨è¿è¡Œï¼ˆPort 8888ï¼‰
- [ ] Web æœåŠ¡å™¨è¿è¡Œï¼ˆPort 80ï¼‰
- [ ] æµè§ˆå™¨å¯è®¿é—® Dashboardï¼ˆPort 8000ï¼‰
- [ ] æ— äººæœºé£è¡Œæµ‹è¯•æˆåŠŸ
- [ ] ç¯å…‰æ§åˆ¶æµ‹è¯•æˆåŠŸ
- [ ] åƒç´ æµé€è§†é¢‘æ˜¾ç¤ºæ­£å¸¸

---

## ğŸ¯ æ¼”ç¤ºæ—¶é—´å®‰æ’

- **æ€»æ—¶é—´**ï¼š15-20 åˆ†é’Ÿ
- **UE åº”ç”¨å¯åŠ¨**ï¼š3-5 åˆ†é’Ÿ
- **åƒç´ æµé€å¯åŠ¨**ï¼š2-3 åˆ†é’Ÿ
- **æ— äººæœºé£è¡Œæ¼”ç¤º**ï¼š2-3 åˆ†é’Ÿ
- **ç¯å…‰æ§åˆ¶æ¼”ç¤º**ï¼š2-3 åˆ†é’Ÿ
- **åƒç´ æµé€æ¼”ç¤º**ï¼š3-5 åˆ†é’Ÿ
- **Q&A**ï¼š5 åˆ†é’Ÿ

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. `/data/home/sim6g/rayCode/droneOnCampus/logs/` ä¸­çš„æ—¥å¿—æ–‡ä»¶
2. æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰çš„é”™è¯¯ä¿¡æ¯
3. ç»ˆç«¯è¾“å‡ºçš„å®Œæ•´é”™è¯¯å †æ ˆ

---

**æœ€åæ›´æ–°**: 2025-12-04
